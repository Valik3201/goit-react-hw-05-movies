"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[370],{8370:function(e,r,t){t.r(r),t.d(r,{default:function(){return h}});var n=t(1413),a=t(5861),i=t(9439),u=t(4687),c=t.n(u),s=t(2791),l=t(1087),o=t(3984),d=t(4390),p=function(){var e=(0,a.Z)(c().mark((function e(r){var t,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,n.Z)((0,n.Z)({},d._),{},{params:{query:r.query,include_adult:r.include_adult||!1,language:r.language||"en-US",primary_release_year:r.primary_release_year||"",page:r.page||1,region:r.region||"",year:r.year||""}}),e.next=3,d.o.get("/search/movie",t);case 3:return a=e.sent,i=a.data,e.abrupt("return",i.results);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),f=t(184),h=function(){var e=(0,s.useRef)(null),r=(0,s.useRef)(null),t=(0,l.lr)(),u=(0,i.Z)(t,2),d=u[0],h=u[1],v=(0,o.a)({queryKey:["searchMovies"],queryFn:function(){var t=(0,a.Z)(c().mark((function t(){var n,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({query:null===(n=e.current)||void 0===n?void 0:n.value.trim(),include_adult:!1,language:"en-US",primary_release_year:null===(a=r.current)||void 0===a?void 0:a.value.trim(),page:1,region:"",year:""});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}),y=v.data,g=v.isLoading,m=v.isError,x=v.error,_=v.refetch,j=function(){var t=(0,a.Z)(c().mark((function t(a){var i,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),i=e.current.value.trim(),u=r.current.value.trim(),h((0,n.Z)({query:i},u&&{year:u})),_({query:i,include_adult:!1,language:"en-US",primary_release_year:u,page:1,region:"",year:""});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,s.useEffect)((function(){var t=d.get("query")||"",n=d.get("year")||"";e.current.value=t,r.current.value=n}),[d]),(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{className:"scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl pb-8",children:"Search Movies"}),(0,f.jsxs)("form",{onSubmit:j,children:[(0,f.jsx)("input",{type:"text",ref:e,placeholder:"Enter movie title..."}),(0,f.jsx)("input",{type:"text",ref:r,placeholder:"Enter release year..."}),(0,f.jsx)("button",{type:"submit",children:"Search"})]}),g&&(0,f.jsx)("div",{children:"Loading..."}),m&&(0,f.jsxs)("div",{children:["Error fetching data: ",x.message]}),(0,f.jsx)("div",{children:null===y||void 0===y?void 0:y.map((function(e){return(0,f.jsxs)(l.rU,{to:"/movies/".concat(e.id),children:[(0,f.jsx)("img",{src:"https://image.tmdb.org/t/p/w342".concat(e.poster_path),alt:e.title||e.name}),(0,f.jsx)("h3",{children:e.title||e.name}),(0,f.jsx)("h4",{children:e.release_date?new Date(e.release_date).getFullYear():new Date(e.first_air_date).getFullYear()})]},e.id)}))})]})}},4390:function(e,r,t){t.d(r,{_:function(){return a},o:function(){return n.Z}});var n=t(5294);n.Z.defaults.baseURL="https://api.themoviedb.org/3";var a={headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJlYTMyZWM5MzExODExYjA2NDkyNzhmZGFmYzEyMzAwZSIsInN1YiI6IjY1YzIwN2U2ZjQ0ZjI3MDE2M2MwYzBjMiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.zkFtcEcge5gUigfN2sq7K5C-DaNfEfDz1qyoSucACIQ"}}}}]);
//# sourceMappingURL=370.ac8ebae9.chunk.js.map